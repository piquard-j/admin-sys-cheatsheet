 # Pentest cheatsheet

## Enumeration
Scan réseau classique  : -sV Version, -sC
```
nmap -sV -sC TARGETIP
```
Samba (port 445) :
```
smbclient -N -L \\\\IP
```
LDAP (port 389) :
```
ldapsearch -x -H ldap://<IP> -D '<DOMAIN>\<username>' -w '<password>' -b "CN=Users,DC=<1_SUBDOMAIN>,DC=<TLD>"| tee fichier.txt
ldapdomaindump -u 'DOMAIN\username' -p 'PASSWORD' @IP
```


### Port
|Port|Détails|Liens|   |   |
|---|---|---|---|---|
|80|HTTP|   |   |   |
|443|HTTPS   |   |   |   |
|389|LDAP|   |   |   |
|636|LDAPS|   |   |   |
|445|SMB|   |   |   |
|5985|Win-RM|[Evil-WinRM](https://github.com/piquard-j/admin-sys-cheatsheet/blob/main/pentest-cheatsheet.md#evil-winrm)||   |

## Escalade de privilège
### Evil-WinRM
```
evil-winrm -i IP -u USERNAME -p PASSWORD
```

## Outils pratiques

* Chisel : Pour rediriger les ports de l'attaqué vers l'attaquant : https://github.com/jpillora/chisel
* Kerbrute : Pour faire de l'énumeration sur Kerberos (port 88) : https://github.com/ropnop/kerbrute
* Evil-WinRM : Ouvrir un shell sur un Windows via le port 5985 : https://github.com/Hackplayers/evil-winrm
* dnSpy : Désassembler des binaires : https://github.com/dnSpy/dnSpy
